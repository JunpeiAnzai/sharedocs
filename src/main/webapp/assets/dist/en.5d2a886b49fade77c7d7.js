!function(t){function e(o){if(n[o])return n[o].exports;var a=n[o]={exports:{},id:o,loaded:!1};return t[o].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="/assets/dist/",e(0)}([function(t,e,n){n(1)},function(t,e,n){(function(e){t.exports=e.notification=n(2)}).call(e,function(){return this}())},function(t,e){var n=function(){function t(t){var n={};return n.article=t.article_id+(t.fragment_id?"#comment-"+t.fragment_id:""),n.image=t.image,n.sender=t.sender,n.title=t.title,n.type=t.type,"stock"==t.type?(n.action="stocked",n.type1="your",n.type3=""):"like"==t.type?(n.action="liked",n.type1="your",n.type3=""):(n.action="commented",t.is_commenter?(n.type1="to a",n.type3="you commented."):(n.type1="to your",n.type3="")),n.target="post",t.is_commenter?n.type3="you commented.":n.type3="",n.when=e(t.when),t.state?n.state="":n.state="unread",n}function e(t){var e=new Date,n=new Date(t),o=Math.ceil((e.getTime()-n.getTime())/1e3),a=null;return a=o<60?"just now":o<120?"a minute ago":o<3600?(Math.floor(o/60)<10?" ":"")+Math.floor(o/60)+"minutes ago":o<7200?"a hour ago":o<86400?(Math.floor(o/3600)<10?" ":"")+Math.floor(o/3600)+"hours ago":o<604800?(Math.floor(o/86400)<10?" ":"")+Math.floor(o/86400)+"days ago":(Math.floor(o/604800)<10?" ":"")+Math.floor(o/604800)+"weeks ago"}var n=$("meta[name=csrf-token]").attr("content");$.ajax({method:"GET",url:"/notifications",dataType:"json",data:{"csrf-token":n}}).done(function(e){if($("#notification_count").text(e.count),e.data.length>0){$("#notification-items").children().remove(),$("#notification-default").remove();for(var o='\t      <li class="notification-contents-list-item"> \t        <a href="/articles/___article___" class="notification-contents-item-link___state___"> \t          <div class="notification-contents-item-icon"> \t            <img src="___image___" /> \t          </div> \t          <div class="notification-contents-item-text"> \t            <span class="sender">___sender___</span> <span class="action ___type___">___action___</span> ___type1___ ___target___ <span class="title">"___title___"</span> ___type3___ \t            <div class="status">___when___</div> \t          </div> \t        </a> \t      </li>',a=0;a<e.data.length;a++){var _=t(e.data[a]);$("#notification-items").append($(o.replace(/___article___/,_.article).replace(/___image___/,_.image).replace(/___sender___/,_.sender).replace(/___action___/,_.action).replace(/___type___/,_.type).replace(/___type1___/,_.type1).replace(/___target___/,_.target).replace(/___title___/,_.title).replace(/___type3___/,_.type3).replace(/___when___/,_.when).replace(/___state___/,_.state)))}}var i=new Favico({animation:"none"});0!=e.count?($("#notification_count").addClass("unchecked").on("click",function(){$.ajax({method:"POST",url:"/notifications",dataType:"json",data:{"csrf-token":n}}).done(function(t){$("#notification_count").removeClass("unchecked").text(t.count),i.reset()})}),i.badge(e.count)):i.reset(),$(document).on("click",function(){$(".dropdownWrapper").css("display","none")}),$("#notification_count").on("click",function(t){t.stopPropagation(),$(".dropdownWrapper").toggle()})}).fail(function(t,e,n){console.error("error during get notifications")})};t.exports=n}]);
//# sourceMappingURL=en.5d2a886b49fade77c7d7.js.map